<!DOCTYPE html>
<html lang="it" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pizza</title>

    <!-- IMPORT CSS -->
    <th:block th:replace="~{fragments/fragments :: import-css}"></th:block>
  </head>
  <body>
    <!-- HEADER -->
    <header>
      <th:block
        th:replace="~{fragments/fragments :: navbar('pizze')}"
      ></th:block>
    </header>

    <main>
      <div class="container">
        <h1>Pizza</h1>

        <a th:href="@{/pizza/create}" class="btn btn-primary my-3"
          >Crea una nuova pizza</a
        >

        <!-- Filter Form -->
        <form
          class="p-4 border light-shadow rounded-5 mb-4"
          action="/pizza/search"
          method="GET"
        >
          <div class="mb-3">
            <label for="input" class="form-label">Cerca per nome</label>
            <input type="text" class="form-control" id="input" name="title" />
          </div>
          <button type="submit" class="btn btn-primary">Submit</button>
        </form>

        <!-- Table -->
        <table
          class="table table-striped table-hover"
          th:if="${pizze.size() > 0}"
        >
          <thead>
            <tr>
              <th scope="col">ID</th>
              <th scope="col">Nome</th>
              <th scope="col">Descrizione</th>
              <th scope="col">Immagine</th>
              <th scope="col">Prezzo</th>
              <th scope="col">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr th:each="pizza : ${pizze}" th:object="${pizza}">
              <th scope="row">[[*{id}]]</th>
              <td>[[*{nome}]]</td>
              <td>[[*{descrizione}]]</td>
              <td>[[*{urlImmagine}]]</td>
              <td>[[*{prezzo}]]</td>
              <td>
                <a
                  th:href="@{/pizza/{id}(id=${pizza.id})}"
                  class="btn btn-primary btn-sm"
                >
                  <i class="fa-solid fa-eye"></i>
                </a>
                <a
                  th:href="@{/pizza/edit/{id}(id=${pizza.id})}"
                  class="btn btn-warning btn-sm"
                >
                  <i class="fa-solid fa-pencil"></i>
                </a>
              </td>
            </tr>
          </tbody>
        </table>

        <div th:unless="${pizze.size() > 0}">
          <h2>Non ci sono pizze disponibili</h2>
        </div>
      </div>
    </main>
  </body>
</html>
